var app=null;document.addEventListener("DOMContentLoaded",function(){app=new Vue({el:"#app",data:function(){var n=80;return{srvModel:window.srvModel,payTotal:"0",payTotalNumeric:0,tipTotal:null,tipTotalNumeric:0,fontSize:n,defaultFontSize:n,keys:["1","2","3","4","5","6","7","8","9",".","0","C"],payButtonLoading:!1}},created:function(){window.addEventListener("pagehide",this.unsetPayButtonLoading)},destroyed:function(){window.removeEventListener("pagehide",this.unsetPayButtonLoading)},computed:{Currency:function(){return this.srvModel.Currency.toUpperCase()}},watch:{payTotal:function(){this.$nextTick(function(){var n=this.getWidth(this.$refs.display),t=this.getWidth(this.$refs.amount),i=n/t||0,r=n<t;r?this.fontSize=Math.floor(this.fontSize*i):!r&&this.fontSize<this.defaultFontSize&&(this.fontSize=Math.min(this.fontSize*i,this.defaultFontSize))})}},methods:{getWidth:function(n){var t=window.getComputedStyle(n),i=parseFloat(n.clientWidth),r=parseFloat(t.paddingLeft),u=parseFloat(t.paddingRight);return i-r-u},clearTotal:function(){this.payTotal="0";this.payTotalNumeric=0;this.tipTotal=null;this.tipTotalNumeric=0},handleFormSubmit:function(){this.payButtonLoading=!0},unsetPayButtonLoading:function(){this.payButtonLoading=!1},buttonClicked:function(n){var t=this.payTotal,i,r;n==="C"?(t=t.substring(0,t.length-1),t=t===""?"0":t):n==="."?t.indexOf(".")===-1&&(t+=n):(t==="0"&&(t=""),t+=n,i=this.srvModel.currencyInfo.divisibility,r=t.indexOf("."),r!==-1&&t.length-r-1>i&&(t=t.replace(".",""),t=t.substr(0,t.length-i)+"."+t.substr(t.length-i)));this.payTotal=t;this.payTotalNumeric=parseFloat(t);this.tipTotalNumeric=0;this.tipTotal=null},tipClicked:function(n){this.payTotalNumeric-=this.tipTotalNumeric;this.tipTotalNumeric=parseFloat((this.payTotalNumeric*(n/100)).toFixed(this.srvModel.currencyInfo.divisibility));this.payTotalNumeric=parseFloat((this.payTotalNumeric+this.tipTotalNumeric).toFixed(this.srvModel.currencyInfo.divisibility));this.payTotal=this.payTotalNumeric.toString(10);this.tipTotal=this.tipTotalNumeric===0?null:this.tipTotalNumeric.toFixed(this.srvModel.currencyInfo.divisibility)},removeTip:function(){this.payTotalNumeric-=this.tipTotalNumeric;this.payTotal=this.payTotalNumeric.toString(10);this.tipTotalNumeric=0;this.tipTotal=null}}})});